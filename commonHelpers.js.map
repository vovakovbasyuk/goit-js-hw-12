{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: '44400646-52d28046ae8ecec8adffea605',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: 15,\n};\n\nexport async function getPhoto(userWord, currentPage) {\n  const params = new URLSearchParams({\n    q: userWord,\n    page: currentPage,\n  });\n  const url = `/?${params}`;\n  const res = await axios.get(url);\n  return res.data;\n}\n","export function imgTemplate(photo) {\n  return photo.hits\n    .map(\n      hit => `<li class=\"gallery-item\">\n    <a href=${hit.largeImageURL} class=\"gallery-link\">\n     <img\n      class=\"gallery-image\"\n      src= ${hit.webformatURL}\n      alt=${hit.tags}\n     />\n    </a>\n    <div class=\"image-container\">\n      <ul class=\"text-list\">\n        <li>\n          <h3>Likes</h3>\n          <p class=\"image-description\">${hit.likes}</p>\n        </li>\n        <li>\n          <h3>Views</h3>\n          <p class=\"image-description\">${hit.views}</p>\n        </li>\n        <li>\n          <h3>Comments</h3>\n          <p class=\"image-description\">${hit.comments}</p>\n        </li>\n        <li>\n          <h3>Downloads</h3>\n          <p class=\"image-description\">${hit.downloads}</p>\n        </li>\n      </ul>\n    </div>\n  </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { imgTemplate } from './js/render-function';\nimport { getPhoto } from './js/pixabay-api';\nconst loader = document.querySelector('.loader');\n\nloader.style.display = 'none';\n\nconst refreshPage = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  widthRatio: 1,\n  height: '500px',\n});\n\nconst formEl = document.querySelector('.form-search');\nconst imagesUl = document.querySelector('.gallery');\n\nconst loadMoreBtn = document.querySelector('.load-btn');\n\nlet currentPage = 1;\nlet value = '';\nlet maxPage = 1;\nconst perPage = 15;\nformEl.addEventListener('submit', async e => {\n  e.preventDefault();\n  currentPage = 1;\n  loader.style.display = 'block';\n  value = formEl.elements.request.value.trim();\n  if (!value) {\n    iziToast.show({\n      message: 'Please,  enter a picture',\n      messageColor: 'white',\n      backgroundColor: 'red',\n      progressBarColor: 'white',\n    });\n  } else {\n    try {\n      const data = await getPhoto(value, currentPage);\n      maxPage = Math.ceil(data.totalHits / perPage);\n      loader.style.display = 'none';\n      if (!data.hits.length) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: 'white',\n          backgroundColor: 'red',\n          progressBarColor: 'white',\n        });\n      }\n      const markup = imgTemplate(data);\n      imagesUl.innerHTML = markup;\n      updateBtnStatus();\n      refreshPage.refresh();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  formEl.elements.request.value = '';\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  const data = await getPhoto(value, currentPage);\n  const markup = imgTemplate(data);\n  imagesUl.insertAdjacentHTML('beforeend', markup);\n  refreshPage.refresh();\n  scrollElem();\n  updateBtnStatus();\n});\n\nfunction updateBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideBtn();\n  } else {\n    showBtn();\n  }\n}\n\nfunction showBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideBtn() {\n  loadMoreBtn.classList.add('hidden');\n  if (maxPage !== 0) {\n    iziToast.show({\n      message: 'We are sorry, but you have reached the end of search results',\n      messageColor: 'white',\n      backgroundColor: 'red',\n      progressBarColor: 'white',\n    });\n  }\n}\n\nfunction scrollElem() {\n  const liElem = imagesUl.children[0];\n  const height = liElem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","getPhoto","userWord","currentPage","url","imgTemplate","photo","hit","loader","refreshPage","SimpleLightbox","formEl","imagesUl","loadMoreBtn","value","maxPage","perPage","e","iziToast","data","markup","updateBtnStatus","err","scrollElem","hideBtn","showBtn","height"],"mappings":"owBACAA,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,OAAS,CACtB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,EACZ,EAEO,eAAeC,EAASC,EAAUC,EAAa,CAKpD,MAAMC,EAAM,KAJG,IAAI,gBAAgB,CACjC,EAAGF,EACH,KAAMC,CACV,CAAG,CACsB,GAEvB,OADY,MAAMH,EAAM,IAAII,CAAG,GACpB,IACb,CClBO,SAASC,EAAYC,EAAO,CACjC,OAAOA,EAAM,KACV,IACCC,GAAO;AAAA,cACCA,EAAI,aAAa;AAAA;AAAA;AAAA,aAGlBA,EAAI,YAAY;AAAA,YACjBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAOqBA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,yCAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,yCAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,yCAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,QAKjD,EACA,KAAK,EAAE,CACZ,CC1BA,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/CA,EAAO,MAAM,QAAU,OAEvB,MAAMC,EAAc,IAAIC,EAAe,aAAc,CACnD,SAAU,GACV,aAAc,MACd,aAAc,IACd,WAAY,EACZ,OAAQ,OACV,CAAC,EAEKC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAW,SAAS,cAAc,UAAU,EAE5CC,EAAc,SAAS,cAAc,WAAW,EAEtD,IAAIV,EAAc,EACdW,EAAQ,GACRC,EAAU,EACd,MAAMC,EAAU,GAChBL,EAAO,iBAAiB,SAAU,MAAMM,GAAK,CAK3C,GAJAA,EAAE,eAAc,EAChBd,EAAc,EACdK,EAAO,MAAM,QAAU,QACvBM,EAAQH,EAAO,SAAS,QAAQ,MAAM,KAAI,EACtC,CAACG,EACHI,EAAS,KAAK,CACZ,QAAS,2BACT,aAAc,QACd,gBAAiB,MACjB,iBAAkB,OACxB,CAAK,MAED,IAAI,CACF,MAAMC,EAAO,MAAMlB,EAASa,EAAOX,CAAW,EAC9CY,EAAU,KAAK,KAAKI,EAAK,UAAYH,CAAO,EAC5CR,EAAO,MAAM,QAAU,OAClBW,EAAK,KAAK,QACbD,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,QACd,gBAAiB,MACjB,iBAAkB,OAC5B,CAAS,EAEH,MAAME,EAASf,EAAYc,CAAI,EAC/BP,EAAS,UAAYQ,EACrBC,IACAZ,EAAY,QAAO,CACpB,OAAQa,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAGHX,EAAO,SAAS,QAAQ,MAAQ,EAClC,CAAC,EAEDE,EAAY,iBAAiB,QAAS,SAAY,CAChDV,IACA,MAAMgB,EAAO,MAAMlB,EAASa,EAAOX,CAAW,EACxCiB,EAASf,EAAYc,CAAI,EAC/BP,EAAS,mBAAmB,YAAaQ,CAAM,EAC/CX,EAAY,QAAO,EACnBc,IACAF,GACF,CAAC,EAED,SAASA,GAAkB,CACrBlB,GAAeY,EACjBS,IAEAC,GAEJ,CAEA,SAASA,GAAU,CACjBZ,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASW,GAAU,CACjBX,EAAY,UAAU,IAAI,QAAQ,EAC9BE,IAAY,GACdG,EAAS,KAAK,CACZ,QAAS,+DACT,aAAc,QACd,gBAAiB,MACjB,iBAAkB,OACxB,CAAK,CAEL,CAEA,SAASK,GAAa,CAEpB,MAAMG,EADSd,EAAS,SAAS,CAAC,EACZ,sBAAqB,EAAG,OAC9C,OAAO,SAAS,CACd,IAAKc,EAAS,EACd,SAAU,QACd,CAAG,CACH"}